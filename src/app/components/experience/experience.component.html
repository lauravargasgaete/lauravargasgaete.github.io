<section class="experience section section--dark" id="experience">
    <div class="container">
        <div class="section__header">
            <h2 class="section__title">{{ 'experience.title' | translate }}</h2>
            <p class="section__subtitle">{{ 'experience.subtitle' | translate }}</p>
        </div>

        <div class="timeline">
            <div class="timeline__line"></div>

            <div class="timeline__item" *ngFor="let key of getVisibleKeys(); let first = first"
                [class.timeline__item--highlight]="first">
                <div class="timeline__marker" [class.timeline__marker--highlight]="first"></div>
                <div class="timeline__content">
                    <span class="timeline__date">{{ 'experience.items.' + key + '.date' | translate }}</span>
                    <h3 class="timeline__title">{{ 'experience.items.' + key + '.title' | translate }}</h3>
                    <p class="timeline__org">{{ 'experience.items.' + key + '.org' | translate }}</p>
                    <p class="timeline__description">{{ 'experience.items.' + key + '.description' | translate }}</p>
                    <div class="timeline__tags">
                        <span class="tag">{{ 'experience.items.' + key + '.tags.0' | translate }}</span>
                        <span class="tag">{{ 'experience.items.' + key + '.tags.1' | translate }}</span>
                        <span class="tag" *ngIf="('experience.items.' + key + '.tags.2' | translate) as tag">
                            <ng-container *ngIf="!tag.startsWith('experience.')">{{ tag }}</ng-container>
                        </span>
                    </div>
                </div>
            </div>

            <!-- Toggle button to show all/less -->
            <div class="timeline__toggle" *ngIf="experienceKeys.length > 3">
                <button #toggleButton class="timeline__toggle-btn" (click)="toggleShowAll(toggleButton)">
                    <span>{{ (showAll ? 'experience.showLess' : 'experience.showMore') | translate }}</span>
                    <span class="timeline__caret" [class.timeline__caret--up]="showAll">â–¼</span>
                </button>
            </div>
        </div>
    </div>
</section>